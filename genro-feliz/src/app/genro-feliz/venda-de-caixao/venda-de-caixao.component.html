<app-breadcrumb
  [aplicacao]="'Gerenciador Funerária'"
  [subAplicacao]="'Venda de Caixão'"
/>
<div
  class="d-flex justify-content-center align-items-center"
  style="height: 100vh"
  *ngIf="carregandoListasDeCaixao"
>
  <p-progressSpinner
    styleClass="w-8rem h-8rem"
    strokeWidth="8"
    fill="var(--surface-ground)"
    animationDuration=".5s"
  />
</div>

<p-table
  #tabelaVendasDeCaixao
  [value]="vendasDeCaixao"
  [tableStyle]="{ 'min-width': '50rem' }"
  *ngIf="!carregandoListasDeCaixao"
  [paginator]="true"
  [rows]="5"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Total de Vendas de Caixão: {totalRecords}"
  [globalFilterFields]="['nomeVendedor', 'modeloCaixao']"
>
  <ng-template pTemplate="caption">
    <button class="btn btn-primary">
      <i class="bi bi-plus"></i> Cadastrar Venda de Caixão
    </button>
    <div class="flex mt-3">
      <p-iconField iconPosition="left" class="ml-auto">
        <p-inputIcon>
          <i class="bi bi-search"></i>
        </p-inputIcon>
        <input
          pInputText
          style="width: 30%;"
          type="text"
          (input)="
            tabelaVendasDeCaixao.filterGlobal(
              $any($event.target).value,
              'contains'
            )
          "
          placeholder="Pesquisar por Vendedor ou Modelo de Caixão"
        />
      </p-iconField>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="nomeVendedor" style="width: 20%">
        Nome do Vendedor <p-sortIcon field="nomeVendedor" />
      </th>
      <th pSortableColumn="modeloCaixao">
        Modelo do Caixão<p-sortIcon field="modeloCaixao" />
      </th>
      <th>Data da Venda</th>
      <th>Ações</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-venda>
    <tr>
      <td>{{ venda.nomeVendedor }}</td>
      <td>{{ venda.modeloCaixao }}</td>
      <td>{{ venda.dataVenda }}</td>
      <td>
        <button class="btn btn-warning text-white m-2" pTooltip="Editar Venda de Caixão">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-danger text-white m-2" pTooltip="Excluir Venda de Caixão">
          <i class="bi bi-trash"></i>
        </button>
      </td>
    </tr>
  </ng-template>
</p-table>
